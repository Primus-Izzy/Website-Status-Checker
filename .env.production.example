# Production Environment Configuration
# Copy this file to .env for production deployment

# =============================================================================
# REQUIRED - Must be set for production
# =============================================================================

# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=

# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ADMIN_API_KEY=

# Database password
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(16))"
DB_PASSWORD=

# =============================================================================
# Application Settings
# =============================================================================

ENV=production
DEBUG=false
APP_NAME=Website Status Checker
APP_VERSION=1.0.0

# =============================================================================
# Server Configuration
# =============================================================================

HOST=0.0.0.0
PORT=8000
WORKERS=4  # Adjust based on CPU cores (2x cores is typical)
RELOAD=false

# =============================================================================
# Database Configuration
# =============================================================================

# For Docker Compose (PostgreSQL)
DATABASE_URL=postgresql://checker:${DB_PASSWORD}@db:5432/website_checker

# For standalone deployment
# DATABASE_URL=postgresql://user:password@localhost:5432/dbname

DB_NAME=website_checker
DB_USER=checker
# DB_PASSWORD set above

# =============================================================================
# CORS Configuration (IMPORTANT!)
# =============================================================================

# Comma-separated list of allowed origins
# NEVER use wildcards (*) in production!
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ALLOW_CREDENTIALS=true

# =============================================================================
# File Upload Configuration
# =============================================================================

MAX_UPLOAD_SIZE_MB=100
UPLOAD_DIR=gui/uploads
EXPORT_DIR=gui/exports

# =============================================================================
# Rate Limiting
# =============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_UPLOADS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# =============================================================================
# Security
# =============================================================================

SSL_VERIFY_DEFAULT=true
ENABLE_SECURITY_HEADERS=true

# =============================================================================
# Logging
# =============================================================================

LOG_LEVEL=INFO
LOG_FORMAT=json  # Use json for production
LOG_FILE=  # Empty for stdout (recommended for containers)

# =============================================================================
# Job Management
# =============================================================================

JOB_RETENTION_HOURS=24
MAX_CONCURRENT_JOBS=10

# =============================================================================
# Monitoring & Metrics
# =============================================================================

ENABLE_METRICS=true
METRICS_PATH=/metrics

# Optional: Sentry for error tracking
# SENTRY_DSN=https://your-sentry-dsn-here
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Optional: Monitoring Stack (Prometheus/Grafana)
# =============================================================================

# Uncomment if using docker-compose with --profile monitoring
# PROMETHEUS_PORT=9090
# GRAFANA_PORT=3000
# GRAFANA_USER=admin
# GRAFANA_PASSWORD=  # Generate secure password

# =============================================================================
# Deployment Notes
# =============================================================================

# 1. Generate all required secrets (SECRET_KEY, ADMIN_API_KEY, DB_PASSWORD)
# 2. Set ALLOWED_ORIGINS to your actual domain(s)
# 3. Adjust WORKERS based on your server's CPU cores
# 4. Set up SSL/TLS termination (nginx, Traefik, etc.)
# 5. Configure firewall to allow only necessary ports
# 6. Set up automated backups for postgres_data volume
# 7. Configure log aggregation (ELK, Datadog, etc.)
# 8. Set up monitoring alerts
# 9. Test disaster recovery procedures
# 10. Document runbook for common operations
